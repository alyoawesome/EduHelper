<html>
    <head>
        <title> Education Planner </title>

        <script type="text/javascript">
            
            // Issue #2 code begins here 
            var allMarks = []; 
            function submitForm() {
                var courseName = document.getElementById("course-name").value;
                var workType = document.getElementById("work-type").value; 
                var weight = document.getElementById("weight").value;
                var mark = document.getElementById("mark").value;  
                
                var entry = {
                    
                    cn: courseName,
                    wt: workType,
                    w: parseFloat(weight),
                    m: parseFloat(mark) 
                };
                
                allMarks.push(entry)
            }
            // Issue #2 code ends here 
            
            // Issue #3 code starts here
            
          
            function calculateAverage() {
                
                
            // STEP 1: Create an empty object that will eventually include the course names as its properties. Let's call this object marksBySubject
        
               marksBySubject = {};
                
                      
            //STEP 2: Iterate through the allMarks array, and group each mark based on the course. In addition, within each course, we will group the marks based on the work type. We will store all of this inside marksBySubject
                
                
				for (var i = 0; i < allMarks.length; i++) {
					var nextMark = allMarks[i];
                    
                    // cn uses {} because it's an object and wt uses [] because it's an array
                    if (!marksBySubject[nextMark.cn]) {
						marksBySubject[nextMark.cn] = {};
					}
                    if (!marksBySubject[nextMark.wt]) {
                        marksBySubject[nextmark.wt] = [];
            
                    }
                    
                    marksBySubject[nextmark.cn][nextMark.wt].push(nextMark);
				}

            // STEP 3: Iterate through all the courses inside marksBySubject. For each course, we will calculate the average
                
                for (var subject in marksBySubject) {
					if (marksBySubject.hasOwnProperty(subject)) {
						var nextSubject = marksBySubject[subject];
                        
                        
                        
                        var totalOfAllWeights = 0;
                        var totalOfAllMarks = 0; 
                        // nextSubject[workType] means accessing the work type within nextSubject
                        for(var workType in nextSubject) {
                            if (nextSubject.hasOwnProperty(workType)){
                                var nextWorkType = nextSubject[workType];
                                
                            }
                            
                        }
					}
				}
                
                //Put displayOutputs here later
                displayOutputs();
            }
            
            // Issue #3 code ends here 
            // Issue #4 code starts here 
            function displayOutputs() {
                
               
                for(var subject in marksBySubject){
                    if (marksBySubject.hasOwnProperty(subject)) {
						var nextSubject = marksBySubject[subject];
                        var nextOutput = document.createElement("div");
                        nextOutput.innerHTML=subject+": "+nextSubject.finalMark+"%";
                        document.getElementById("output-wrapper").appendChild(nextOutput);
                    }
                    
                    
                }
                
                
                
                
                
                
                
                
            }
            
            
        </script>
        
        <!--Issue #1 code starts here --> 
    </head> 
    <body>
        <h1>Educational Planner</h1>
        <div class="input-item">  
            <span> Course Name </span>
            <input type="text" id="course-name"/>  
        </div> 
        <div class="input-item">
            <span>Type of assignment</span>
            <select id="work-type"> 
                <option>Test</option>
                <option>Homework</option>
            </select>
        </div>
        <div class="input-item">
            <span>Weight of assignment</span>
            <input type="text"  id="weight"/> 
        </div>
        
        <div class="input-item">
            <span>Mark</span>
            <input type="text" id="mark"/> 
        </div>
        <div class="input-item">
            <button id="submit-button" onclick="submitForm();">
                Submit
			</button>
		</div>
        <div class="input-item"> 
            <button id="calc-avg-button" onclick="calculateAverage();">
                Calculate Average
            </button>
        </div>
        
        <!--Issue #1 code ends here --> 
        <!-- Issue #4 code starts here --> 
        
        <button id="Display" onclick="displayOutputs();alert('alex');">
            Display Percentage
        </button>
        <div id="output-wrapper">
        </div>
        
        
        
      
    </body>
</html>    